(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{184:function(e,r,a){e.exports=a(342)},189:function(e,r,a){},190:function(e,r){},191:function(e,r){},192:function(e,r){},324:function(e,r,a){},341:function(e,r,a){},342:function(e,r,a){"use strict";a.r(r);var t=a(11),n=a.n(t),o=a(121),c=a.n(o),l=(a(189),a(1)),i=a(2),s=a(8),u=a(6),p=a(9),d=a(126),f=a(173),h=a(174),b=Object(h.a)(),y=a(12),m={mapUrlToProps:function(e,r){return{showParking:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.cp),showBikeTraffic:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.bt),extrudeBikeTraffic:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.xbt),showCarTraffic:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.ct),extrudeCarTraffic:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.xct),showEvCharging:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.evc),menuOpen:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.m),showBusStops:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.bs),showFerryStops:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.fs),showMetroStops:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.ms),showRailStops:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.rs),showShipStops:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.ss),showTramStops:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.ts)}},mapUrlChangeHandlersToProps:function(e){return{onChange:function(e){Object(y.replaceInUrlQuery)("cp",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.showParking)),Object(y.replaceInUrlQuery)("bt",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.showBikeTraffic)),Object(y.replaceInUrlQuery)("xbt",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.extrudeBikeTraffic)),Object(y.replaceInUrlQuery)("ct",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.showCarTraffic)),Object(y.replaceInUrlQuery)("xct",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.extrudeCarTraffic)),Object(y.replaceInUrlQuery)("evc",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.showEvCharging)),Object(y.replaceInUrlQuery)("m",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.menuOpen)),Object(y.replaceInUrlQuery)("bs",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.showBusStops)),Object(y.replaceInUrlQuery)("fs",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.showFerryStops)),Object(y.replaceInUrlQuery)("ms",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.showMetroStops)),Object(y.replaceInUrlQuery)("rs",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.showRailStops)),Object(y.replaceInUrlQuery)("ss",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.showShipStops)),Object(y.replaceInUrlQuery)("ts",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.showTramStops))}}}},T=Object(y.addUrlProps)({mapUrlToProps:m.mapUrlToProps,mapUrlChangeHandlersToProps:m.mapUrlChangeHandlersToProps}),g={mapUrlToProps:function(e,r){return{longitude:Object(y.decode)(y.UrlQueryParamTypes.number,e.lng)||18.0686,latitude:Object(y.decode)(y.UrlQueryParamTypes.number,e.lat)||59.3293,zoom:Object(y.decode)(y.UrlQueryParamTypes.number,e.z)||13,pitch:Object(y.decode)(y.UrlQueryParamTypes.number,e.p)||45,bearing:Object(y.decode)(y.UrlQueryParamTypes.number,e.b)||0}},mapUrlChangeHandlersToProps:function(e){return{onChange:function(e){Object(y.replaceInUrlQuery)("lng",Object(y.encode)(y.UrlQueryParamTypes.number,e.longitude)),Object(y.replaceInUrlQuery)("lat",Object(y.encode)(y.UrlQueryParamTypes.number,e.latitude)),Object(y.replaceInUrlQuery)("z",Object(y.encode)(y.UrlQueryParamTypes.number,e.zoom.toFixed(1))),Object(y.replaceInUrlQuery)("p",Object(y.encode)(y.UrlQueryParamTypes.number,e.pitch.toFixed(1))),Object(y.replaceInUrlQuery)("b",Object(y.encode)(y.UrlQueryParamTypes.number,e.bearing.toFixed(1)))}}}},O=Object(y.addUrlProps)({mapUrlToProps:g.mapUrlToProps,mapUrlChangeHandlersToProps:g.mapUrlChangeHandlersToProps}),k=a(67),j=a(105),U=a.n(j),w=function(){},S=function(){},P=function(){},C=function(){},Q=function(){},v=function(){},L=function(){},_=function(){},E=function(){},x=function(){},I=function(){};a.e(10).then(a.bind(null,367)).then(function(e){w=e.default,B.layerLoaded()}),a.e(6).then(a.bind(null,368)).then(function(e){S=e.default,B.layerLoaded()}),a.e(7).then(a.bind(null,369)).then(function(e){P=e.default,B.layerLoaded()}),a.e(5).then(a.bind(null,370)).then(function(e){C=e.default,B.layerLoaded()}),a.e(4).then(a.bind(null,371)).then(function(e){Q=e.default,B.layerLoaded()}),a.e(13).then(a.bind(null,372)).then(function(e){v=e.default,B.layerLoaded()}),a.e(9).then(a.bind(null,373)).then(function(e){L=e.default,B.layerLoaded()}),a.e(11).then(a.bind(null,374)).then(function(e){_=e.default,B.layerLoaded()}),a.e(8).then(a.bind(null,375)).then(function(e){E=e.default,B.layerLoaded()}),a.e(12).then(a.bind(null,376)).then(function(e){x=e.default,B.layerLoaded()}),a.e(3).then(a.bind(null,377)).then(function(e){I=e.default,B.layerLoaded()}),function e(){requestAnimationFrame(e),U.a.update()}();var B={layerLoaded:function(){},onLayerLoaded:function(e){B.layerLoaded=e},setLayers:function(e){return[w(e.showParking),C(e.showBikeTraffic,e._bikeTrafficHeight),Q(e.showCarTraffic,e._carTrafficHeight),v(e.showEvCharging,e.toolTipCallback),S(e.showBusStops),P(e.showFerryStops),L(e.showMetroStops),_(e.showRailStops),E(e.showShipStops),x(e.showTramStops),I]},animateLayer:function(e,r,a){var t={value:r?.01:1},n=r?1:.01;new U.a.Tween(t).to({value:n},500).easing(U.a.Easing.Quadratic.InOut).onUpdate(function(){e(t.value),a()}).start()}},H=B,M=[{label:"Parking",ref:"parkingCheck",key:"showParking"},{label:"Bicycle Traffic",ref:"bikeTrafficCheck",key:"showBikeTraffic"},{label:"3D Bicycle Traffic",ref:"bikeExtrudeCheck",key:"extrudeBikeTraffic",animate:!0,heightKey:"_bikeTrafficHeight",dep:"showBikeTraffic"},{label:"Vehicle Traffic",ref:"carTrafficCheck",key:"showCarTraffic"},{label:"3D Vehicle Traffic",ref:"carTrafficCheck",key:"extrudeCarTraffic",heightKey:"_carTrafficHeight",animate:!0,dep:"showCarTraffic"},{label:"Electric Vehicle Charging Stations",ref:"evChargingCheck",key:"showEvCharging"},{label:"Bus Stops",ref:"busStopCheck",key:"showBusStops"},{label:"Metro Stations",ref:"metroStopCheck",key:"showMetroStops"},{label:"Railway Stations",ref:"railStopCheck",key:"showRailStops"},{label:"Ferry Stops",ref:"shipStopCheck",key:"showShipStops"},{label:"Tram Stations",ref:"tramStopCheck",key:"showTramStops"},{label:"Car Ferry Stops",ref:"ferryStopCheck",key:"showFerryStops"}],F=a(349),z=function(e,r,a,t){return n.a.createElement("div",{className:"controller-option "+(r.dep?"option-secondary-checkbox ":"")+(r.dep&&!e[r.dep]?"disabled":""),key:t},n.a.createElement(F.a,{label:r.label,ref:r.ref,type:"checkbox",defaultChecked:e[r.key],onChange:function(e,t){var n=t.checked;return a(Object(k.a)({},r,{checked:n}))}}))},D=(a(324),a(172)),V=a(125),W=function(e){function r(e){var a;return Object(l.a)(this,r),(a=Object(s.a)(this,Object(u.a)(r).call(this,e)))._updateLayers=function(){var e=Object(k.a)({},a.props,{_bikeTrafficHeight:a._bikeTrafficHeight,_carTrafficHeight:a._carTrafficHeight}),r=H.setLayers(e);a.props.onLayerChange(r)},a._toggleLayer=function(e){var r=e.checked,t=e.key,n=e.animate,o=e.heightKey,c=Object(k.a)({},a.props);c[t]=r,n&&o&&H.animateLayer(function(e){return a[o]=e},r,function(){return a._updateLayers()}),a.props.onChange(c),setTimeout(a._updateLayers,0)},a.controlOptions=M,a._bikeTrafficHeight=e.extrudeBikeTraffic?1:.01,a._carTrafficHeight=e.extrudeCarTraffic?1:.01,a}return Object(p.a)(r,e),Object(i.a)(r,[{key:"componentDidMount",value:function(){var e=this;this._updateLayers(),b.listen(function(){return e.forceUpdate()}),H.onLayerLoaded(function(){return e._updateLayers()})}},{key:"render",value:function(){var e=this;return n.a.createElement(D.slide,{width:200,className:"controller-container",right:!0,noOverlay:!0,disableOverlayClick:!0,isOpen:this.props.menuOpen,onStateChange:function(r){return e.props.onChange(Object(k.a)({},e.props,{menuOpen:r.isOpen}))}},n.a.createElement("h3",null,"Stockholm Sustainable Traffic Planning"),n.a.createElement("p",null,"Toggle the checkboxes below to turn layers on\xa0and\xa0off"),this.controlOptions.map(function(r,a){return z(e.props,r,function(r){e._toggleLayer(r)},a)}),n.a.createElement("div",{className:"controller-option"},"*right click and drag to rotate camera"))}}]),r}(n.a.Component);W.defaultProps={showParking:!1,showBikeTraffic:!0,extrudeBikeTraffic:!0,showCarTraffic:!V.isMobile,extrudeCarTraffic:!1,showEvCharging:!0,menuOpen:!V.isMobile,onLayerChange:function(){},showBusStops:!0,showFerryStops:!0,showMetroStops:!0,showRailStops:!0,showShipStops:!0,showTramStops:!0};var R=T(W),J=(a(340),a(341),function(e){function r(){var e;return Object(l.a)(this,r),(e=Object(s.a)(this,Object(u.a)(r).call(this)))._onWebGLInitialized=function(r){r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL),e.setState({gl:r})},e._onLayerChange=function(r){e.setState({mapLayers:r})},e._toolTipCallback=function(r){e.setState({hoveredObject:r.object,pointerX:r.x,pointerY:r.y})},e.state={mapLayers:[]},e}return Object(p.a)(r,e),Object(i.a)(r,[{key:"_renderTooltip",value:function(){var e=this.state||{},r=e.hoveredObject,a=e.pointerX,t=e.pointerY;return r&&n.a.createElement("div",{style:{position:"absolute",zIndex:1,pointerEvents:"none",left:a,top:t,color:"green",backgroundColor:"white",fontFamily:"Open Sans",padding:5}},r.message)}},{key:"_updateUrl",value:function(e){var r=this,a=e.viewState;console.log(a),clearTimeout(this.urlTimer),this.urlTimer=setTimeout(function(){r.props.onChange(a)},500)}},{key:"componentDidMount",value:function(){var e=this;document.getElementById("container").addEventListener("contextmenu",function(e){return e.preventDefault()}),b.listen(function(){return e.forceUpdate()})}},{key:"render",value:function(){var e=this,r=this.state.gl,a=this.state.mapLayers;return n.a.createElement("div",{id:"container"},n.a.createElement(d.f,{ref:function(r){e._deck=r&&r.deck},onWebGLInitialized:this._onWebGLInitialized,initialViewState:this.props,onViewStateChange:function(r){return e._updateUrl(r)},controller:!0,layers:a},r&&n.a.createElement(f.a,{ref:function(r){e._map=r&&r.getMap()},mapboxApiAccessToken:"pk.eyJ1IjoiYWRhbWVrYmVyZyIsImEiOiJjamttcXdjeDMwZHd0M2tvemx1a3BnZ2h5In0.JtC9rUXVaxJ8ONGdfmPmsg",onLoad:this._onMapLoad,mapStyle:"mapbox://styles/mapbox/dark-v10",preventStyleDiffing:!0}),this._renderTooltip()),n.a.createElement(R,{onLayerChange:this._onLayerChange,toolTipCallback:this._toolTipCallback}),n.a.createElement("div",{className:"footer"},"2019 -"," ",n.a.createElement("a",{href:"http://tylernwolf.com?ref=mobilityObserver",target:"_blank",rel:"noopener noreferrer"},"Tyler Wolf")," ","and Adam Ekberg - Data Source:"," ",n.a.createElement("a",{href:"https://dataportalen.stockholm.se/dataportalen/",target:"_blank",rel:"noopener noreferrer"},"https://dataportalen.stockholm.se/dataportalen/")))}}]),r}(n.a.Component));J.defaultProps={longitude:18.0686,latitude:59.3293,zoom:13,pitch:45,bearing:0};var A=O(J);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(y.configureUrlQuery)({history:b}),c.a.render(n.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[184,1,2]]]);
//# sourceMappingURL=main.50d44680.chunk.js.map