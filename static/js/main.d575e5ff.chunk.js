(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{184:function(e,r,t){e.exports=t(342)},189:function(e,r,t){},190:function(e,r){},191:function(e,r){},192:function(e,r){},324:function(e,r,t){},341:function(e,r,t){},342:function(e,r,t){"use strict";t.r(r);var a=t(12),n=t.n(a),o=t(121),c=t.n(o),i=(t(189),t(1)),l=t(2),s=t(8),u=t(6),p=t(9),d=t(126),f=t(173),h=t(174),b=Object(h.a)(),y=t(11),m={mapUrlToProps:function(e,r){return{showParking:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.cp),showBikeTraffic:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.bt),extrudeBikeTraffic:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.xbt),showCarTraffic:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.ct),extrudeCarTraffic:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.xct),showEvCharging:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.evc),menuOpen:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.m),showPublicTransit:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.pt),showBusStops:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.bs),showFerryStops:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.fs),showMetroStops:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.ms),showRailStops:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.rs),showShipStops:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.ss),showTramStops:Object(y.decode)(y.UrlQueryParamTypes.boolean,e.ts)}},mapUrlChangeHandlersToProps:function(e){return{onChange:function(e){Object(y.replaceInUrlQuery)("cp",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.showParking)),Object(y.replaceInUrlQuery)("bt",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.showBikeTraffic)),Object(y.replaceInUrlQuery)("xbt",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.extrudeBikeTraffic)),Object(y.replaceInUrlQuery)("ct",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.showCarTraffic)),Object(y.replaceInUrlQuery)("xct",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.extrudeCarTraffic)),Object(y.replaceInUrlQuery)("evc",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.showEvCharging)),Object(y.replaceInUrlQuery)("m",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.menuOpen)),Object(y.replaceInUrlQuery)("pt",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.showPublicTransit)),Object(y.replaceInUrlQuery)("bs",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.showBusStops)),Object(y.replaceInUrlQuery)("fs",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.showFerryStops)),Object(y.replaceInUrlQuery)("ms",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.showMetroStops)),Object(y.replaceInUrlQuery)("rs",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.showRailStops)),Object(y.replaceInUrlQuery)("ss",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.showShipStops)),Object(y.replaceInUrlQuery)("ts",Object(y.encode)(y.UrlQueryParamTypes.boolean,e.showTramStops))}}}},T=Object(y.addUrlProps)({mapUrlToProps:m.mapUrlToProps,mapUrlChangeHandlersToProps:m.mapUrlChangeHandlersToProps}),k={mapUrlToProps:function(e,r){return{longitude:Object(y.decode)(y.UrlQueryParamTypes.number,e.lng)||18.0686,latitude:Object(y.decode)(y.UrlQueryParamTypes.number,e.lat)||59.3293,zoom:Object(y.decode)(y.UrlQueryParamTypes.number,e.z)||13,pitch:Object(y.decode)(y.UrlQueryParamTypes.number,e.p)||45,bearing:Object(y.decode)(y.UrlQueryParamTypes.number,e.b)||0}},mapUrlChangeHandlersToProps:function(e){return{onChange:function(e){Object(y.replaceInUrlQuery)("lng",Object(y.encode)(y.UrlQueryParamTypes.number,e.longitude)),Object(y.replaceInUrlQuery)("lat",Object(y.encode)(y.UrlQueryParamTypes.number,e.latitude)),Object(y.replaceInUrlQuery)("z",Object(y.encode)(y.UrlQueryParamTypes.number,e.zoom.toFixed(1))),Object(y.replaceInUrlQuery)("p",Object(y.encode)(y.UrlQueryParamTypes.number,e.pitch.toFixed(1))),Object(y.replaceInUrlQuery)("b",Object(y.encode)(y.UrlQueryParamTypes.number,e.bearing.toFixed(1)))}}}},g=Object(y.addUrlProps)({mapUrlToProps:k.mapUrlToProps,mapUrlChangeHandlersToProps:k.mapUrlChangeHandlersToProps}),O=t(67),w=t(105),j=t.n(w),U=function(){},P=function(){},S=function(){},C=function(){},Q=function(){},v=function(){},L=function(){},E=function(){},_=function(){},x=function(){},I=function(){};t.e(10).then(t.bind(null,367)).then(function(e){U=e.default,B.layerLoaded()}),t.e(6).then(t.bind(null,368)).then(function(e){P=e.default,B.layerLoaded()}),t.e(7).then(t.bind(null,369)).then(function(e){S=e.default,B.layerLoaded()}),t.e(5).then(t.bind(null,370)).then(function(e){C=e.default,B.layerLoaded()}),t.e(4).then(t.bind(null,371)).then(function(e){Q=e.default,B.layerLoaded()}),t.e(13).then(t.bind(null,372)).then(function(e){v=e.default,B.layerLoaded()}),t.e(9).then(t.bind(null,373)).then(function(e){L=e.default,B.layerLoaded()}),t.e(11).then(t.bind(null,374)).then(function(e){E=e.default,B.layerLoaded()}),t.e(8).then(t.bind(null,375)).then(function(e){_=e.default,B.layerLoaded()}),t.e(12).then(t.bind(null,376)).then(function(e){x=e.default,B.layerLoaded()}),t.e(3).then(t.bind(null,377)).then(function(e){I=e.default,B.layerLoaded()}),function e(){requestAnimationFrame(e),j.a.update()}();var B={layerLoaded:function(){},onLayerLoaded:function(e){B.layerLoaded=e},setLayers:function(e){return[U(e.showParking),C(e.showBikeTraffic,e._bikeTrafficHeight),Q(e.showCarTraffic,e._carTrafficHeight),v(e.showEvCharging,e.toolTipCallback),P(e.showBusStops),S(e.showFerryStops),L(e.showMetroStops),E(e.showRailStops),_(e.showShipStops),x(e.showTramStops),I]},animateLayer:function(e,r,t){var a={value:r?.01:1},n=r?1:.01;new j.a.Tween(a).to({value:n},500).easing(j.a.Easing.Quadratic.InOut).onUpdate(function(){e(a.value),t()}).start()}},H=B,M=[{label:"Parking",ref:"parkingCheck",key:"showParking"},{label:"Bicycle Traffic",ref:"bikeTrafficCheck",key:"showBikeTraffic"},{label:"3D Bicycle Traffic",ref:"bikeExtrudeCheck",key:"extrudeBikeTraffic",animate:!0,heightKey:"_bikeTrafficHeight",dep:"showBikeTraffic",indent:!0},{label:"Vehicle Traffic",ref:"carTrafficCheck",key:"showCarTraffic"},{label:"3D Vehicle Traffic",ref:"carTrafficCheck",key:"extrudeCarTraffic",heightKey:"_carTrafficHeight",animate:!0,dep:"showCarTraffic",indent:!0},{label:"Electric Vehicle Charging Stations",ref:"evChargingCheck",key:"showEvCharging"},{label:"Public transit",ref:"publicTransitCheck",key:"showPublicTransit",isMaster:!0},{label:"Bus Stops",ref:"busStopCheck",key:"showBusStops",masterKey:"showPublicTransit",indent:!0},{label:"Metro Stations",ref:"metroStopCheck",key:"showMetroStops",masterKey:"showPublicTransit",indent:!0},{label:"Railway Stations",ref:"railStopCheck",key:"showRailStops",masterKey:"showPublicTransit",indent:!0},{label:"Ferry Stops",ref:"shipStopCheck",key:"showShipStops",masterKey:"showPublicTransit",indent:!0},{label:"Tram Stations",ref:"tramStopCheck",key:"showTramStops",masterKey:"showPublicTransit",indent:!0},{label:"Car Ferry Stops",ref:"ferryStopCheck",key:"showFerryStops",masterKey:"showPublicTransit",indent:!0}],F=t(349);function K(e,r){return r&&!e[r]}var z=function(e,r,t,a){return n.a.createElement("div",{className:"controller-option "+(r.indent?"option-indented-checkbox ":"")+(K(e,r.dep)?"disabled":""),key:a},n.a.createElement(F.a,{label:r.label,ref:r.ref,type:"checkbox",checked:e[r.key],defaultChecked:e[r.key],onChange:function(e,a){var n=a.checked;return t(Object(O.a)({},r,{checked:n}))}}))},D=function(e,r,t){var a=[r],n=M.find(function(e){return e.key===r});if(n.isMaster)M.filter(function(e){return e.masterKey===r}).forEach(function(e){return a.push(e.key)});else{var o=n.masterKey;if(o)if(t)a.push(o);else{var c=M.filter(function(e){return e.masterKey===o});c.map(function(r){return e[r.key]}).reduce(function(e,r){return r?e:e+1},1)===c.length&&a.push(o)}}return a},V=(t(324),t(172)),W=t(125),R=function(e){function r(e){var t;return Object(i.a)(this,r),(t=Object(s.a)(this,Object(u.a)(r).call(this,e)))._updateLayers=function(){var e=Object(O.a)({},t.props,{_bikeTrafficHeight:t._bikeTrafficHeight,_carTrafficHeight:t._carTrafficHeight}),r=H.setLayers(e);t.props.onLayerChange(r)},t._toggleLayer=function(e){var r=e.checked,a=e.key,n=e.animate,o=e.heightKey,c=Object(O.a)({},t.props);n&&o&&H.animateLayer(function(e){return t[o]=e},r,function(){return t._updateLayers()}),D(c,a,r).forEach(function(e){return c[e]=r}),t.props.onChange(c),setTimeout(t._updateLayers,0)},t.controlOptions=M,t._bikeTrafficHeight=e.extrudeBikeTraffic?1:.01,t._carTrafficHeight=e.extrudeCarTraffic?1:.01,t}return Object(p.a)(r,e),Object(l.a)(r,[{key:"componentDidMount",value:function(){var e=this;this._updateLayers(),b.listen(function(){return e.forceUpdate()}),H.onLayerLoaded(function(){return e._updateLayers()})}},{key:"render",value:function(){var e=this;return n.a.createElement(V.slide,{width:200,className:"controller-container",right:!0,noOverlay:!0,disableOverlayClick:!0,isOpen:this.props.menuOpen,onStateChange:function(r){return e.props.onChange(Object(O.a)({},e.props,{menuOpen:r.isOpen}))}},n.a.createElement("h3",null,"Stockholm Sustainable Traffic Planning"),n.a.createElement("p",null,"Toggle the checkboxes below to turn layers on\xa0and\xa0off"),this.controlOptions.map(function(r,t){return z(e.props,r,function(r){e._toggleLayer(r)},t)}),n.a.createElement("div",{className:"controller-option"},"*right click and drag to rotate camera"))}}]),r}(n.a.Component);R.defaultProps={showParking:!1,showBikeTraffic:!0,extrudeBikeTraffic:!0,showCarTraffic:!W.isMobile,extrudeCarTraffic:!1,showEvCharging:!0,menuOpen:!W.isMobile,onLayerChange:function(){},showPublicTransit:!0,showBusStops:!0,showFerryStops:!0,showMetroStops:!0,showRailStops:!0,showShipStops:!0,showTramStops:!0};var J=T(R),A=(t(340),t(341),function(e){function r(){var e;return Object(i.a)(this,r),(e=Object(s.a)(this,Object(u.a)(r).call(this)))._onWebGLInitialized=function(r){r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL),e.setState({gl:r})},e._onLayerChange=function(r){e.setState({mapLayers:r})},e._toolTipCallback=function(r){e.setState({hoveredObject:r.object,pointerX:r.x,pointerY:r.y})},e.state={mapLayers:[]},e}return Object(p.a)(r,e),Object(l.a)(r,[{key:"_renderTooltip",value:function(){var e=this.state||{},r=e.hoveredObject,t=e.pointerX,a=e.pointerY;return r&&n.a.createElement("div",{style:{position:"absolute",zIndex:1,pointerEvents:"none",left:t,top:a,color:"green",backgroundColor:"white",fontFamily:"Open Sans",padding:5}},r.message)}},{key:"_updateUrl",value:function(e){var r=this,t=e.viewState;console.log(t),clearTimeout(this.urlTimer),this.urlTimer=setTimeout(function(){r.props.onChange(t)},500)}},{key:"componentDidMount",value:function(){var e=this;document.getElementById("container").addEventListener("contextmenu",function(e){return e.preventDefault()}),b.listen(function(){return e.forceUpdate()})}},{key:"render",value:function(){var e=this,r=this.state.gl,t=this.state.mapLayers;return n.a.createElement("div",{id:"container"},n.a.createElement(d.f,{ref:function(r){e._deck=r&&r.deck},onWebGLInitialized:this._onWebGLInitialized,initialViewState:this.props,onViewStateChange:function(r){return e._updateUrl(r)},controller:!0,layers:t},r&&n.a.createElement(f.a,{ref:function(r){e._map=r&&r.getMap()},mapboxApiAccessToken:"pk.eyJ1IjoiYWRhbWVrYmVyZyIsImEiOiJjamttcXdjeDMwZHd0M2tvemx1a3BnZ2h5In0.JtC9rUXVaxJ8ONGdfmPmsg",onLoad:this._onMapLoad,mapStyle:"mapbox://styles/mapbox/dark-v10",preventStyleDiffing:!0}),this._renderTooltip()),n.a.createElement(J,{onLayerChange:this._onLayerChange,toolTipCallback:this._toolTipCallback}),n.a.createElement("div",{className:"footer"},"2019 -"," ",n.a.createElement("a",{href:"http://tylernwolf.com?ref=mobilityObserver",target:"_blank",rel:"noopener noreferrer"},"Tyler Wolf")," ","and Adam Ekberg - Data Source:"," ",n.a.createElement("a",{href:"https://dataportalen.stockholm.se/dataportalen/",target:"_blank",rel:"noopener noreferrer"},"https://dataportalen.stockholm.se/dataportalen/")))}}]),r}(n.a.Component));A.defaultProps={longitude:18.0686,latitude:59.3293,zoom:13,pitch:45,bearing:0};var N=g(A);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(y.configureUrlQuery)({history:b}),c.a.render(n.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[184,1,2]]]);
//# sourceMappingURL=main.d575e5ff.chunk.js.map